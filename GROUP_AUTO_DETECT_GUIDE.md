# Group Auto-Detect Guide
# ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

## üéØ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå

‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏à‡∏∞ **auto-detect** ‡πÅ‡∏•‡∏∞ **auto-save** `GROUP_ID` ‡πÄ‡∏°‡∏∑‡πà‡∏≠ OA ‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏° LINE ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á

## üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏û‡∏¥‡πà‡∏° OA ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°

1. ‡πÄ‡∏õ‡∏¥‡∏î LINE app
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà
3. ‡πÄ‡∏û‡∏¥‡πà‡∏° OA (Official Account) ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

‡πÄ‡∏°‡∏∑‡πà‡∏≠ OA ‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°:

‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ **auto-detect** Group ID  
‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Group ID ‡∏•‡∏á‡πÉ‡∏ô `data/groups.json`  
‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï `.env` ‡πÑ‡∏ü‡∏•‡πå‡∏î‡πâ‡∏ß‡∏¢ `LINE_GROUP_ID`  
‚úÖ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°  

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó Server

```bash
# ‡∏õ‡∏¥‡∏î server (Ctrl+C)
# ‡πÄ‡∏õ‡∏¥‡∏î server ‡πÉ‡∏´‡∏°‡πà
npm start
```

## üìä ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞

### ‡∏î‡∏π‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö

```bash
curl https://your-domain.com/api/groups
```

**Response:**
```json
{
  "success": true,
  "count": 1,
  "primaryGroupId": "C1234567890abcdef1234567890abcdef",
  "groups": [
    {
      "id": "C1234567890abcdef1234567890abcdef",
      "name": "‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ó‡∏á‡∏ö‡∏±‡πâ‡∏á‡πÑ‡∏ü",
      "joinedAt": "2024-01-10T12:34:56.000Z",
      "lastActive": "2024-01-10T12:34:56.000Z"
    }
  ],
  "envGroupId": "C1234567890abcdef1234567890abcdef"
}
```

### ‡∏î‡∏π Console Logs

‡πÄ‡∏°‡∏∑‡πà‡∏≠ OA ‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏° ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô logs:

```
üéâ OA joined group: C1234567890abcdef1234567890abcdef
üìç Group name: ‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ó‡∏á‡∏ö‡∏±‡πâ‡∏á‡πÑ‡∏ü
‚úÖ Group saved locally: C1234567890abcdef1234567890abcdef - ‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ó‡∏á‡∏ö‡∏±‡πâ‡∏á‡πÑ‡∏ü
‚úÖ .env updated with LINE_GROUP_ID: C1234567890abcdef1234567890abcdef
‚ö†Ô∏è Please restart the server to apply changes
‚úÖ Welcome message sent to group: C1234567890abcdef1234567890abcdef
```

## üìÅ ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á

### `data/groups.json`
‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà OA ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°

```json
{
  "C1234567890abcdef1234567890abcdef": {
    "id": "C1234567890abcdef1234567890abcdef",
    "name": "‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ó‡∏á‡∏ö‡∏±‡πâ‡∏á‡πÑ‡∏ü",
    "joinedAt": "2024-01-10T12:34:56.000Z",
    "lastActive": "2024-01-10T12:34:56.000Z"
  }
}
```

### `.env`
‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ `LINE_GROUP_ID` ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

```env
LINE_GROUP_ID=C1234567890abcdef1234567890abcdef
```

## üîÑ Events ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£

### Join Event
‡πÄ‡∏°‡∏∑‡πà‡∏≠ OA ‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°:
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö Group ID
- ‚úÖ ‡∏î‡∏∂‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏à‡∏≤‡∏Å LINE API
- ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡πÉ‡∏ô `data/groups.json`
- ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï `.env` ‡πÑ‡∏ü‡∏•‡πå
- ‚úÖ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö

### Leave Event
‡πÄ‡∏°‡∏∑‡πà‡∏≠ OA ‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°:
- ‚úÖ ‡∏•‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å `data/groups.json`

## üõ†Ô∏è Troubleshooting

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô Group ID ‡πÉ‡∏ô `.env`

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** 
- OA ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°
- Server ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ OA ‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß
2. ‡∏î‡∏π console logs ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤ join event
3. ‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó server

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:**
- Webhook ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö join event
- LINE API token ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:**
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `LINE_CHANNEL_ACCESS_TOKEN` ‡πÉ‡∏ô `.env`
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö webhook URL ‡πÉ‡∏ô LINE Developers Console
3. ‡∏î‡∏π console logs ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤ error

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Multiple Groups

‡∏ñ‡πâ‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° OA ‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏•‡∏≤‡∏¢‡∏Å‡∏•‡∏∏‡πà‡∏°:
- ‚úÖ ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô `data/groups.json`
- ‚úÖ `LINE_GROUP_ID` ‡πÉ‡∏ô `.env` ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏£‡∏Å (primary group)
- ‚úÖ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ `/api/groups` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

## üìù API Endpoints

### GET `/api/groups`
‡∏î‡∏π‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö

```bash
curl https://your-domain.com/api/groups
```

**Response:**
```json
{
  "success": true,
  "count": 2,
  "primaryGroupId": "C1234567890abcdef1234567890abcdef",
  "groups": [
    {
      "id": "C1234567890abcdef1234567890abcdef",
      "name": "‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ó‡∏á‡∏ö‡∏±‡πâ‡∏á‡πÑ‡∏ü",
      "joinedAt": "2024-01-10T12:34:56.000Z",
      "lastActive": "2024-01-10T12:34:56.000Z"
    },
    {
      "id": "R1234567890abcdef1234567890abcdef",
      "name": "‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ó‡∏á‡∏™‡∏≥‡∏£‡∏≠‡∏á",
      "joinedAt": "2024-01-10T13:00:00.000Z",
      "lastActive": "2024-01-10T13:00:00.000Z"
    }
  ],
  "envGroupId": "C1234567890abcdef1234567890abcdef"
}
```

## ‚úÖ Checklist

- [ ] OA ‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°
- [ ] ‡∏î‡∏π console logs ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô join event
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `data/groups.json` ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `.env` ‡∏°‡∏µ `LINE_GROUP_ID`
- [ ] ‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó server
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏à‡∏≤‡∏Å OA (1-on-1)
- [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°

## üéâ ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!

‡∏£‡∏∞‡∏ö‡∏ö auto-detect GROUP_ID ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!
